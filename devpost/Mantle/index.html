<!DOCTYPE html>
<!-- _layouts/distill.html --><html>
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">    <!-- Metadata, OpenGraph and Schema.org -->
    
    

    <!-- Standard metadata -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Mantle/Ledge grabbing system | Daniel Martinez Amigo</title>
    <meta name="author" content="Daniel Martinez Amigo">
    <!--
    <meta name="description" content="Creating a mantle system similar to that of Destiny 2 using animation motion warping." />
        -->


    <!-- Bootstrap & MDB -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.19.1/css/mdb.min.css" integrity="sha512-RO38pBRxYH3SoOprtPTD86JFOclM51/XTIdEPh5j8sj4tp8jmQIx26twG52UaLi//hQldfrh7e51WzP9wuP32Q==" crossorigin="anonymous">

    <!-- Bootstrap Table -->
    <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.css">

    <!-- Fonts & Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.0/css/academicons.min.css" integrity="sha512-W4yqoT1+8NLkinBLBZko+dFB2ZbHsYLDdr50VElllRcNt2Q4/GSs6u71UHKxB7S6JEMCp5Ve4xjh3eGQl/HRvg==" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons">

    <!-- Code Syntax Highlighting -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="" id="highlight_theme_light">

    

    <!-- Styles -->
    
    <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%8F%94%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;">
    
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="canonical" href="/devpost/Mantle/">

    <!-- Dark Mode -->
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark">
    <script src="/assets/js/theme.js"></script>
    <script src="/assets/js/dark_mode.js"></script>
    




    <!-- jQuery -->
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>

    
<!-- MathJax -->
<script type="text/javascript">
  window.MathJax = {
    tex: {
      tags: 'ams'
    }
  };
</script>
<script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.1.2/es5/tex-mml-chtml.js"></script>
<script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>


    <!-- Distill js -->
    <script src="/assets/js/distillpub/template.v2.js"></script>
    <script src="/assets/js/distillpub/transforms.v2.js"></script>
    <script src="/assets/js/distillpub/overrides.js"></script>
    
    <!-- Page/Post style -->
    <style type="text/css">
      .fake-img {
  background: #bbb;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 0px 4px rgba(0, 0, 0, 0.1);
  margin-bottom: 12px;
} .fake-img p {
  font-family: monospace;
  color: white;
  text-align: left;
  margin: 12px 0;
  text-align: center;
  font-size: 16px;
}

    </style>
  </head>

  <body>
<d-front-matter>
    <script async type="text/json">{
      "title": "Mantle/Ledge grabbing system",
      "description": "Creating a mantle system similar to that of Destiny 2 using animation motion warping.",
      "published": "May 22, 2021",
      "authors": [
        
      ],
      "katex": {
        "delimiters": [
          {
            "left": "$",
            "right": "$",
            "display": false
          },
          {
            "left": "$$",
            "right": "$$",
            "display": true
          }
        ]
      }
    }</script>
  </d-front-matter>

  

    <!-- Header --><header>

  <!-- Nav Bar -->
  <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top">
    <div class="container">
      <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Daniel </span>Martinez Amigo</a>
      <!-- Navbar Toggle -->
      <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar top-bar"></span>
        <span class="icon-bar middle-bar"></span>
        <span class="icon-bar bottom-bar"></span>
      </button>

      <div class="collapse navbar-collapse text-right" id="navbarNav">
        <ul class="navbar-nav ml-auto flex-nowrap">

          <!-- About -->
          <li class="nav-item ">
            <a class="nav-link" href="/">about</a>
          </li>
          

          


          <!-- Other pages -->

          <li class="nav-item  active">
            <a class="nav-link" href="/portfolio/">Projects</a>
          </li>
<!-- Curriculum  -->
           <li class="nav-item">
            <a class="nav-link" target="_blank" href="/assets/pdf/CV_DanielMartinezAmigo.pdf">cv</a>
          </li>

          <!-- Toogle theme mode -->
          <li class="toggle-container">
            <button id="light-toggle" title="Change theme">
              <i class="fas fa-moon"></i>
              <i class="fas fa-sun"></i>
            </button>
          </li>
          
        </ul>
      </div>
    </div>
  </nav>

  <!-- Scrolling Progress Bar -->
  <progress id="progress" value="0">
    <div class="progress-container">
      <span class="progress-bar"></span>
    </div>
  </progress>
</header>


    <!-- Content -->
    <div class="post distill">

      <d-title>
        <h1>Mantle/Ledge grabbing system</h1>
        <p>Creating a mantle system similar to that of Destiny 2 using animation motion warping.</p>
        <p class="post-tags">
        <a href="/portfolio/density">
          <i class="fas fa-undo fa-sm"></i> Back to project</a>  
          </p>
      </d-title>

      <!--
      <d-byline></d-byline>
      -->
  



      <d-article>
        <d-contents>
          <nav class="l-text figcaption">
          <h3>Contents</h3>
          <ul id="toc" class="section-nav">
<li class="toc-entry toc-h2">
<a href="#introduction">Introduction</a>
<ul>
<li class="toc-entry toc-h3"><a href="#ledge-mantle-system-in-destiny-2">Ledge mantle system in Destiny 2</a></li>
</ul>
</li>
<li class="toc-entry toc-h2">
<a href="#mantling-system">Mantling system</a>
<ul>
<li class="toc-entry toc-h3"><a href="#collision-traces-check">Collision Traces check</a></li>
<li class="toc-entry toc-h3"><a href="#movement-using-motion-warping-animations">Movement using motion warping animations</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#improvements-to-be-made">Improvements to be made</a></li>
</ul>
          <!--
          
          -->
          </nav>
        </d-contents>

        <h2 id="introduction">Introduction</h2>

<p>This article expains how the mantle system was implemented using a mix of collision tests, traces and UE5’s motion warping plugin.</p>

<div class="l-body">
        

<figure>

  

  <video src="/assets/video/MantleExample.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" autoplay="" controls=""></video>

  

</figure>

</div>
<div class="caption">
    Final result of mantle system. Shows both short and tall mantle, in first and third person and also demonstrates different edge cases in which the mantle system does not activate such as when theres not enough space to perform a mantle or if the player is not looking toward the mantle surface.
</div>

<h3 id="ledge-mantle-system-in-destiny-2">Ledge mantle system in Destiny 2</h3>

<p>One of the main improvements that Destiny 2 made over the original game was adding a mantling system. This system works by automatically climbing on to ledges and platforms, greatly improving the game feel when trying to do platforming puzzles (a main section of some levels in the game). Many games have a dedicated button to mantle onto ledges, however Destiny 2 uses a simpler method of activation for the mantling system. The criteria to activate the mantling system are the following:</p>

<ul>
  <li>Player must be airborne (not on ground).</li>
  <li>Forward movement input must be pressed.</li>
  <li>Mantle cannot be activated right after a jump (~0.5 seconds must have passed since the player pressed jump to be able to mantle)</li>
  <li>There must be enough space for the player character on the on top of the ledge.</li>
  <li>Player character must be a set distance away vertically from the edge of the ledge. (E.g: Mantle shouldnt happen if the players eyeline is below the edge to mantle to)</li>
  <li>If a tall mantle is needed, the Player must be looking toward the ledge to mantle to(with some degree of tolerance).</li>
</ul>

<p>Once a mantle is activated, depending on the vertical distance to the ledge, the player will perform either a short hop animation or a proper mantling animation in which the players left hand ungrips the weapon and moves to simulate placing their hand on the ledge.</p>

<h2 id="mantling-system">Mantling system</h2>

<p>In my project, the mantling system is mainly done in blueprints. On the player characters <code class="language-plaintext highlighter-rouge">Event BeginPlay</code>, the <code class="language-plaintext highlighter-rouge">MantleCheck</code> Event is bound to the <code class="language-plaintext highlighter-rouge">On Component Hit</code> delegate of the players capsule component:</p>

<div class="l-body">
  <figure>

  <picture>
    

    <!-- Fallback to the original file -->
    <img src="/assets/img/MantleDevpost/InitMantle.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();">
  </picture>

</figure>

</div>
<div class="caption">
   Weapon Init function
</div>

<p>Once a collision is detected, the mantle check event first checks if the other actor in the collision is a <code class="language-plaintext highlighter-rouge">Static Mesh Actor</code> and then performs condition checks to see if the requirements for mantling are met. The main three checks done at this stage prevent further mantle operations such as line trace and collision checks from being carried out on a collision with a static actor in which the player isnt allowed to mantle in the first place.</p>

<div class="l-body">
  <figure>

  <picture>
    

    <!-- Fallback to the original file -->
    <img src="/assets/img/MantleDevpost/MantleCheckStart.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();">
  </picture>

</figure>

</div>
<div class="caption">
   Mantle Check function start
</div>

<p>The IsMantling bool prevents a mantle from starting if the player is currently mantling. The CanAttemptMantle function is a <a href="https://github.com/danimtz/DensityUE5/blob/master/Source/Density/Characters/PlayerCharacters/DensCharacterMovementComponent.cpp#L166" rel="external nofollow noopener" target="_blank">custom function in C++</a>  that comes from the custom CharacterMovementComponent which returns true if the player is airborne and currently pressing the move forward input key. Finally <code class="language-plaintext highlighter-rouge">RecentlyJumped</code> is a bool that is false for the first 0.5 seconds after a player jumps. Since the jump key event is only registered on the player client, in order for the <code class="language-plaintext highlighter-rouge">RecentlyJumped</code> variable to be the same on the server and client, a reliable RPC event is used to set the value of <code class="language-plaintext highlighter-rouge">RecentlyJumped</code> from the client on the server player character as well:</p>

<div class="l-page">
  <figure>

  <picture>
    

    <!-- Fallback to the original file -->
    <img src="/assets/img/MantleDevpost/RecentlyJumpedRPC.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();">
  </picture>

</figure>

</div>
<div class="caption">
   RecentlyJumped Server/Client RPC system. `On Grounded Jump Triggered` gets called from C++ when the player presses jump key and is currently on the ground
</div>

<h3 id="collision-traces-check">Collision Traces check</h3>
<p>Once the initial conditions have passed, the main mantle algorithm performs line traces from the facing the forward direction of the player to check if mantling can be performed. A total of 5 line traces are performed (this number can be changed for more or less precision at the cost of performance). To begin, an initial line trace is performed from the top of the capsule forward. If this trace hits something it means that the mantle cannot be performed and the mantle check exits out early without the need to perform more traces:</p>

<div class="l-page">
  <figure>

  <picture>
    

    <!-- Fallback to the original file -->
    <img src="/assets/img/MantleDevpost/InitialLineTrace.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();">
  </picture>

</figure>

</div>
<div class="caption">
   Performs an initial line trace at the top of the player's capsule. The MantleLineTrace function performs a line trace in the actors forward vector direction, starting at a given ZOffset from the actors origin.
</div>

<div class="l-page">
  <figure>

  <picture>
    

    <!-- Fallback to the original file -->
    <img src="/assets/img/MantleDevpost/Traces.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();">
  </picture>

</figure>

</div>
<div class="caption">
   Mantle line traces are performed from the top to the bottom of the capsule. Once a line trace returns no hit, the rest of the traces dont need to be performed since an empty space for a posible mantle has been detected and additional checks can be performed from there
</div>

<p>Once once of the line traces for the mantle are confirmed to be valid, we check if the player is facing the correct direction and set the player to be uncrouched to ensure that the following clearance check isnt affected by the player capsule being smaller because of crouching.</p>

<div class="l-page">
  <figure>

  <picture>
    

    <!-- Fallback to the original file -->
    <img src="/assets/img/MantleDevpost/Crouch.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();">
  </picture>

</figure>

</div>

<p>Then a clearance check is ran on the expected mantle location. If there is not enough space for the player character, the mantle will not trigger:</p>

<div class="l-page-outset">
  <figure>

  <picture>
    

    <!-- Fallback to the original file -->
    <img src="/assets/img/MantleDevpost/ClearanceCheck.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();">
  </picture>

</figure>

</div>
<div class="caption">
   Clearence check and example using debug setting on the line and capsule trace
</div>

<p>The final step before handling the mantle movement and animations is to set the final mantle position variable and to decide wether a short or a tall mantle animation is needed:</p>

<div class="l-page-outset">
  <figure>

  <picture>
    

    <!-- Fallback to the original file -->
    <img src="/assets/img/MantleDevpost/FinalPosition.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();">
  </picture>

</figure>

</div>

<h3 id="movement-using-motion-warping-animations">Movement using motion warping animations</h3>

<p>The main movement of the mantle is performed using Unreal Engine 5’s motion warping plugin. This plugin allows syncing animation root motion to end up in specific positions and is extremely usful for a task such as this one. For each of the mantle types (short and tall), a third person and first person character animation is needed. The motion warping is driven by the third person animation, as this animation will paly on both the client and the server, while the first person animation is cosmetic and thus client only (since the client is the only one that can see first person animations)</p>

<div class="l-body">
  <figure>

  <picture>
    

    <!-- Fallback to the original file -->
    <img src="/assets/img/MantleDevpost/MantleAnim.gif" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();">
  </picture>

</figure>

</div>
<div class="caption">
   Mantle third person animation. Root motion is disabled in the video example to ilustrate the motion of the animation.
</div>

<p>The motion warping is divided into two sections inside of the animation montage, one for the vertical movement the character does to get to the ledge and another for the horizontal movement to step onto the ledge:</p>
<div class="l-body">
  <figure>

  <picture>
    

    <!-- Fallback to the original file -->
    <img src="/assets/img/MantleDevpost/Warp.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();">
  </picture>

</figure>

</div>

<p>With the motion warp set up on the animation montage, the next step is to set the warp targets for both the vertical and horizontal movement just before playing the animation:</p>

<div class="l-body">
  <figure>

  <picture>
    

    <!-- Fallback to the original file -->
    <img src="/assets/img/MantleDevpost/SetMotionWarp.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();">
  </picture>

</figure>

</div>

<p>The final step is playing the correct mantle animations. If a tall mantle is needed a final check is done to see if the player is looking in the general direction of the ledge. Then the movement mode of the player is set to <code class="language-plaintext highlighter-rouge">Flying</code> while the vertical motion warping is playing and the variable <code class="language-plaintext highlighter-rouge">IsMantling</code> is set to true until the animation finishes playing. If the player is locally controlled, the first person animation also plays:</p>

<div class="l-page-outset">
  <figure>

  <picture>
    

    <!-- Fallback to the original file -->
    <img src="/assets/img/MantleDevpost/PlayAnim.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();">
  </picture>

</figure>

</div>
<div class="caption">
   Play animations mantle animations. The upward execution lines go back to the start to break out of the trace for loop.
</div>

<h2 id="improvements-to-be-made">Improvements to be made</h2>

<ul>
  <li>The mantling animations for the third person character currently only perform the root motion of the character, without any actual animation. A proper animation for the character in third person will be added later.</li>
</ul>

<p><a href="#"><i class="fas fa-arrow-up fa-sm"></i> Back to top</a></p>

<p><a href="/portfolio/density/"><i class="fas fa-undo fa-sm"></i> Back to project</a></p>

      </d-article>

    <!-- 
      <d-appendix>
        <d-footnote-list></d-footnote-list>
        <d-citation-list></d-citation-list>
      </d-appendix>
    -->
    
      <d-bibliography src="/assets/bibliography/"></d-bibliography>
</div>

    <!-- Footer -->
<footer class="fixed-bottom">
  <div class="container mt-0">
    © Copyright 2024 Daniel Martinez Amigo.
    Powered by <a href="http://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> based on <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme.

    
    
  </div>
</footer>



    <!-- Bootsrap & MDB scripts
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.4.4/umd/popper.min.js" integrity="sha512-eUQ9hGdLjBjY3F41CScH3UX+4JDSI9zXeroz7hJ+RteoCaY+GP/LDoM8AO+Pt+DRFw3nXqsjh9Zsts8hnYv8/A==" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.6.1/js/bootstrap.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/js/mdb.min.js" integrity="sha512-Mug9KHKmroQFMLm93zGrjhibM2z2Obg9l6qFG2qKjXEXkMp/VDkI4uju9m4QKPjWSwQ6O2qzZEnJDEeCw0Blcw==" crossorigin="anonymous"></script>
 -->
<!-- Bootsrap & MDB scripts -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.19.1/js/mdb.min.js" integrity="sha512-Mug9KHKmroQFMLm93zGrjhibM2z2Obg9l6qFG2qKjXEXkMp/VDkI4uju9m4QKPjWSwQ6O2qzZEnJDEeCw0Blcw==" crossorigin="anonymous"></script>

    
    

<!-- Scrolling Progress Bar -->
<script type="text/javascript">
  /*
   * This JavaScript code has been adapted from the article 
   * https://css-tricks.com/reading-position-indicator/ authored by Pankaj Parashar, 
   * published on the website https://css-tricks.com on the 7th of May, 2014.
   * Couple of changes were made to the original code to make it compatible 
   * with the `al-foio` theme.
   */
  const progressBar = $("#progress");
  /*
   * We set up the bar after all elements are done loading.
   * In some cases, if the images in the page are larger than the intended
   * size they'll have on the page, they'll be resized via CSS to accomodate
   * the desired size. This mistake, however, breaks the computations as the
   * scroll size is computed as soon as the elements finish loading.
   * To account for this, a minimal delay was introduced before computing the
   * values.
   */
  window.onload = function () {
    setTimeout(progressBarSetup, 50);
  };
  /*
   * We set up the bar according to the browser.
   * If the browser supports the progress element we use that.
   * Otherwise, we resize the bar thru CSS styling
   */
  function progressBarSetup() {
    if ("max" in document.createElement("progress")) {
      initializeProgressElement();
      $(document).on("scroll", function() {
        progressBar.attr({ value: getCurrentScrollPosition() });
      });
      $(window).on("resize", initializeProgressElement);
    } else {
      resizeProgressBar();
      $(document).on("scroll", resizeProgressBar);
      $(window).on("resize", resizeProgressBar);
    }
  }
  /*
   * The vertical scroll position is the same as the number of pixels that
   * are hidden from view above the scrollable area. Thus, a value > 0 is
   * how much the user has scrolled from the top
   */
  function getCurrentScrollPosition() {
    return $(window).scrollTop();
  }

  function initializeProgressElement() {
    let navbarHeight = $("#navbar").outerHeight(true);
    $("body").css({ "padding-top": navbarHeight });
    $("progress-container").css({ "padding-top": navbarHeight });
    progressBar.css({ top: navbarHeight });
    progressBar.attr({
      max: getDistanceToScroll(),
      value: getCurrentScrollPosition(),
    });
  }
  /*
   * The offset between the html document height and the browser viewport
   * height will be greater than zero if vertical scroll is possible.
   * This is the distance the user can scroll
   */
  function getDistanceToScroll() {
    return $(document).height() - $(window).height();
  }

  function resizeProgressBar() {
    progressBar.css({ width: getWidthPercentage() + "%" });
  }
  // The scroll ratio equals the percentage to resize the bar
  function getWidthPercentage() {
    return (getCurrentScrollPosition() / getDistanceToScroll()) * 100;
  }
</script>

    <!-- Medium Zoom JS -->
    <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script>
    <script defer src="/assets/js/zoom.js"></script>
</body>
</html>
